# Accound information
source '~/.muttrc.sh|'

# Cache message headers for quick retrieval
set header_cache=~/.mutt/cache/headers
set message_cachedir=~/.mutt/cache/bodies
set certificate_file=~/.mutt/certificates

set move=no

# Sort like gmail sorts it
set sort=threads
set sort_aux=last-date-received
# Automatically poll subscribed mailboxes for new mail
set imap_check_subscribed
# Display download progress every 5K
set net_inc=5

# uber-mutt stuff
set sidebar_width=22
set sidebar_visible=no
set sidebar_delim='|'
set sidebar_sort=yes
color sidebar_new color148 default
bind index \CP sidebar-prev
bind index \CN sidebar-next
bind index \CO sidebar-open
bind pager \CP sidebar-prev
bind pager \CN sidebar-next
bind pager \CO sidebar-open
macro index b '<enter-command>toggle sidebar_visible<enter><refresh>'
macro pager b '<enter-command>toggle sidebar_visible<enter><redraw-screen>'
bind index B bounce-message

# Ignore gmail stuff, just in case
ignore "Authentication-Results:"
ignore "DomainKey-Signature:"
ignore "DKIM-Signature:"

# Pretty it up
# ----
# default list of header fields to weed out when displaying mail
# ignore them all and then unignore what you want to see
ignore *
unignore  Date To From: Cc Subject X-Tts
hdr_order Date To From: Cc Subject X-Tts
color normal default default
color header color148 default '^(Cc|Date|To|From|Subject|X-Tts):'
color hdrdefault cyan default

color index white default ~N
color index brightwhite default ~O
color index magenta default ~F
color index brightblack default ~D

color tree magenta default
color quoted magenta default
color quoted1 white default
color quoted2 brightred default
color quoted3 brightmagenta default

#color body cyan default "((ftp|http|https)://|news:)[^ >)\"\t]+"
color body magenta default "[-a-z_0-9.+]+@[-a-z_0-9.]+\.[a-z]{2,3}"
color error color88 default
color indicator black color148
color signature brightblack default
color status color148 black
color tilde blue default

# Key bindings
bind pager h display-toggle-weed

# Macros
macro index c   "<change-folder>?<toggle-mailboxes>" "open a different folder"
macro pager c   "<change-folder>?<toggle-mailboxes>" "open a different folder"
macro index \ec "T.*\n;WN;WO^T.*\n"                  "catch up"
macro generic ,sm ":source $HOME/.muttrc\r"          "Resource .muttrc without restart"
